<div class="expenses-page">
  <div class="header">
    <h2>Eksploatacja i koszty</h2>
    <p>Dodawaj wydatki i śledź historię eksploatacji auta.</p>
  </div>

  <div class="grid">
    <section class="card">
      <h3>Dodaj koszt</h3>
      <div class="form-row">
        <label>Data</label>
        <input type="date" [(ngModel)]="newExpense.date">
      </div>
      <div class="form-row">
        <label>Kategoria</label>
        <select [(ngModel)]="newExpense.category">
          <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
        </select>
      </div>
      <div class="form-row">
        <label>Opis</label>
        <input type="text" placeholder="Np. Wymiana zderzaka" [(ngModel)]="newExpense.title">
      </div>
      <div class="form-row">
        <label>Koszt (PLN)</label>
        <input type="number" min="0" step="0.01" [(ngModel)]="newExpense.cost">
      </div>
      <div class="form-row">
        <label>Opis (opcjonalnie)</label>
        <textarea rows="3" [(ngModel)]="newExpense.description"></textarea>
      </div>
      <button class="primary" (click)="addExpense()">Dodaj</button>
    </section>

    <section class="card list-card">

      <div class="form-row">
        <label>Pojazd</label>
        <select [(ngModel)]="selectedVehicleId" (change)="loadExpenses()">
          <option *ngFor="let v of vehicles" [value]="v.id">
            {{ v.make }} {{ v.model }} ({{ v.year }})
          </option>
        </select>
      </div>
      <app-expenses-list
        [expenses]="filteredExpenses"
        (remove)="removeExpense($event.toString())">
      </app-expenses-list>
    </section>

    <section class="card">
      <app-expenses-costs
        [totalCost]="totalCost"
        [(filterFrom)]="filterFrom"
        [(filterTo)]="filterTo"
        [totalCount]="filteredExpenses.length">
      </app-expenses-costs>
    </section>
  </div>
</div>
